<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>kubectl on Tech Memory</title><link>/tags/kubectl/</link><description>Recent content in kubectl on Tech Memory</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 23 Mar 2021 00:00:00 +0800</lastBuildDate><atom:link href="/tags/kubectl/index.xml" rel="self" type="application/rss+xml"/><item><title>Kubectl Cheatsheet</title><link>/cheatsheets/kubectl/</link><pubDate>Tue, 23 Mar 2021 00:00:00 +0800</pubDate><guid>/cheatsheets/kubectl/</guid><description>Kubectl Cheatsheet Docs:
https://kubernetes.io/docs/reference/kubectl/cheatsheet/ https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands https://erosb.github.io/post/json-patch-vs-merge-patch/ Viewing, Finding Resources Nodes # get node status confditions JSONPATH=&amp;#39;{range .items[*]}{@.metadata.name}: {range @.status.conditions[*]}{@.type}={@.status}, {end}{&amp;#34;\n&amp;#34;}{end}&amp;#39; \ &amp;amp;&amp;amp; kubectl get nodes -o jsonpath=&amp;#34;$JSONPATH&amp;#34; # check node cpu / memory usage kubectl top pod # check node status kubectl describe nodes kubernetes-minion-emt8.c.myproject.internal Pods # get resource sort by name kubectl get services --sort-by=.metadata.name # check pod cpu / memory usage # all pod in current namespace kubectl top pod # all pod and its containers in current namespace kubectl top pod --containers # this pod and its containers in current namespace kubectl top pod nginx-0 --containers # sort by cpu kubectl top pod --sort-by=cpu --no-headers # sort by memory kubectl top pod --sort-by=memory --no-headers # get pods which are not in Running kubectl get pods --field-selector=status.</description><content>&lt;h1 id="kubectl-cheatsheet">Kubectl Cheatsheet&lt;/h1>
&lt;p>Docs:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/">https://kubernetes.io/docs/reference/kubectl/cheatsheet/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands">https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://erosb.github.io/post/json-patch-vs-merge-patch/">https://erosb.github.io/post/json-patch-vs-merge-patch/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="viewing-finding-resources">Viewing, Finding Resources&lt;/h2>
&lt;h3 id="nodes">Nodes&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># get node status confditions&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>JSONPATH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{range .items[*]}{@.metadata.name}: {range @.status.conditions[*]}{@.type}={@.status}, {end}{&amp;#34;\n&amp;#34;}{end}&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> kubectl get nodes -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$JSONPATH&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># check node cpu / memory usage&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl top pod
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># check node status&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl describe nodes kubernetes-minion-emt8.c.myproject.internal
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="pods">Pods&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># get resource sort by name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get services --sort-by&lt;span style="color:#f92672">=&lt;/span>.metadata.name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># check pod cpu / memory usage&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># all pod in current namespace&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl top pod
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># all pod and its containers in current namespace&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl top pod --containers
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># this pod and its containers in current namespace&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl top pod nginx-0 --containers
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># sort by cpu&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl top pod --sort-by&lt;span style="color:#f92672">=&lt;/span>cpu --no-headers
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># sort by memory&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl top pod --sort-by&lt;span style="color:#f92672">=&lt;/span>memory --no-headers
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># get pods which are not in Running&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get pods --field-selector&lt;span style="color:#f92672">=&lt;/span>status.phase!&lt;span style="color:#f92672">=&lt;/span>Running
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># get events for a certainer pod&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get event --namespace default --field-selector involvedObject.name&lt;span style="color:#f92672">=&lt;/span>nginx-0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>kubectl rollout history deployment/nginx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl rollout history statefulset/nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># get first pod log &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl logs &lt;span style="color:#e6db74">`&lt;/span>kubectl get po -o name | grep keyword | head -1&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl exec -it &lt;span style="color:#e6db74">`&lt;/span>kubectl get po -o name | grep keyword | head -1&lt;span style="color:#e6db74">`&lt;/span> -- bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="others">Others&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># get configmap item&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get configmap nginx -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.data.nginx\.conf}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Produce a period-delimited tree of all keys returned for nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Helpful when locating a key within a complex nested JSON structure&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get nodes -o json | jq -c &lt;span style="color:#e6db74">&amp;#39;paths|join(&amp;#34;.&amp;#34;)&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Produce a period-delimited tree of all keys returned for pods, etc&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get pods -o json | jq -c &lt;span style="color:#e6db74">&amp;#39;paths|join(&amp;#34;.&amp;#34;)&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># View api resources list&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl api-resources
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl api-resources --sort-by&lt;span style="color:#f92672">=&lt;/span>name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl api-resources --sort-by&lt;span style="color:#f92672">=&lt;/span>kind
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl api-resources --api-group&lt;span style="color:#f92672">=&lt;/span>networking.k8s.io
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="troubleshoot">Troubleshoot&lt;/h2>
&lt;h3 id="check-resource-status">Check Resource Status&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># check contaner statuses&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get pod nginx-0 -n default -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;{.status.containerStatuses}&amp;#34;&lt;/span> | jq
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># get events for a certainer pod&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get event --namespace default --field-selector involvedObject.name&lt;span style="color:#f92672">=&lt;/span>nginx-0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="run-a-debugger-pod--deployment">Run a Debugger Pod / Deployment&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># run a mysql client pod to troubleshoot database issue:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl run myclient --rm -i --tty --image mysql:5.7 -- bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># run a postgres client pod to troubleshoot database issue:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl run pgclient --rm -i --tty --image postgres:13-alpine -- bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># run a mongo client pod to troubleshoot mongodb issue:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl run mongoclient --rm -i --tty --image mongo:5 -- bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># run a busybox pod to troubleshoot network or http issue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl run debugger --rm -i --tty --image nicolaka/netshoot:latest -- bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># run a netshoot pod to troubleshoot network or http issue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl run debugger --rm -i --tty --image nicolaka/netshoot:latest -- bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="temporarily-change-resource">Temporarily Change Resource&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># disable healthcheck if you want to troubleshoot healthcheck failure&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># --type json, use json patch(RFC 6902), check official docs&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl patch deployment nginx --type json -p&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;[{&amp;#34;op&amp;#34;: &amp;#34;remove&amp;#34;, &amp;#34;path&amp;#34;: &amp;#34;/spec/template/spec/containers/0/livenessProbe&amp;#34;}]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># increase initialDelaySeconds to 3600&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl patch deploy nginx --type json &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -p&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;[{&amp;#34;op&amp;#34;: &amp;#34;replace&amp;#34;, &amp;#34;path&amp;#34;: &amp;#34;/spec/template/spec/containers/0/livenessProbe/initialDelaySeconds&amp;#34;, &amp;#34;value&amp;#34;: 3600}]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> {&amp;#34;op&amp;#34;: &amp;#34;replace&amp;#34;, &amp;#34;path&amp;#34;: &amp;#34;/spec/template/spec/containers/0/readinessProbe/initialDelaySeconds&amp;#34;, &amp;#34;value&amp;#34;: 3600}]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># change &amp;#34;command&amp;#34; to &amp;#34;sleep 1000&amp;#34; to troubleshoot entrypoint command error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl patch deployment nginx --type json -p&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;[{&amp;#34;op&amp;#34;: &amp;#34;replace&amp;#34;, &amp;#34;path&amp;#34;: &amp;#34;/spec/template/spec/containers/0/command&amp;#34;, &amp;#34;value&amp;#34;:[&amp;#34;sleep&amp;#34;, &amp;#34;1000&amp;#34;]}]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># change image to troubleshoot software version issue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl patch deployment nginx --type&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;json&amp;#39;&lt;/span> -p&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;[{&amp;#34;op&amp;#34;: &amp;#34;replace&amp;#34;, &amp;#34;path&amp;#34;: &amp;#34;/spec/template/spec/containers/0/image&amp;#34;, &amp;#34;value&amp;#34;:&amp;#34;nginx:1.21&amp;#34;}]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># or with set image sub cmd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl set image deployment/nginx nginx&lt;span style="color:#f92672">=&lt;/span>nginx:1.21 &lt;span style="color:#75715e"># {containerName}=${image}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># scale a deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl scale --replicas&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> deploy/nginx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># scale a statefulset&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl scale --replicas&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> statefulset/nginx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># scale multiple deployments&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl scale --replicas&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> deploy/nginx1 deploy/nginx2 deploy/nginx3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># scale with kubctl patch&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl patch deploy nginx --patch &lt;span style="color:#e6db74">&amp;#39;{&amp;#34;spec&amp;#34;: {&amp;#34;replicas&amp;#34;: 2}}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># restart container inside your pod without chaging pod name and pod ip&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl exec -it nginx-0 -- /bin/sh -c &lt;span style="color:#e6db74">&amp;#34;kill 1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="test-kubernetes-features">Test Kubernetes Features&lt;/h2>
&lt;h3 id="run-a-test-deployment">Run a Test Deployment&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># run a test nginx deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl create deployment nginx --image&lt;span style="color:#f92672">=&lt;/span>nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># delete&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl delete deploy nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># run a test busybox deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl create deployment busybox --image&lt;span style="color:#f92672">=&lt;/span>busybox -- sleep &lt;span style="color:#ae81ff">1000&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># delete&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl delete deploy busybox
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="create-yaml-objects-from-stdin">Create YAML Objects from Stdin&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># create nginx statefulset&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export APP_NAME&lt;span style="color:#f92672">=&lt;/span>nginx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export IMAGE&lt;span style="color:#f92672">=&lt;/span>nginx:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cat &lt;span style="color:#e6db74">&amp;lt;&amp;lt;EOF | kubectl apply -f -
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">apiVersion: v1
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">kind: Service
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">metadata:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> name: ${APP_NAME}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> labels:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> app: ${APP_NAME}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">spec:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ports:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> - port: 80
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> name: web
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> clusterIP: None
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> selector:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> app: ${APP_NAME}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">apiVersion: apps/v1
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">kind: StatefulSet
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">metadata:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> name: ${APP_NAME}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">spec:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> serviceName: ${APP_NAME}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> replicas: 1
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> selector:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> matchLabels:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> app: ${APP_NAME}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> template:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> metadata:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> labels:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> app: ${APP_NAME}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> spec:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> containers:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> - name: ${APP_NAME}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> image: ${IMAGE}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> ports:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> - containerPort: 80
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> name: web
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># volumeMounts:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># - name: www
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># mountPath: /usr/share/nginx/html
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># volumeClaimTemplates:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># - metadata:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># name: www
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># spec:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># accessModes: [ &amp;#34;ReadWriteOnce&amp;#34; ]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># resources:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># requests:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># storage: 1Gi
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="awesome-kubernetes">Awesome Kubernetes&lt;/h2>
&lt;h3 id="k9s">k9s&lt;/h3>
&lt;p>&lt;a href="https://github.com/derailed/k9s">k9s&lt;/a>: Terminal Graphical UI&lt;/p>
&lt;h3 id="kubectx">kubectx&lt;/h3>
&lt;p>&lt;a href="https://github.com/ahmetb/kubectx">kubectx&lt;/a>: Kube Context Switcher&lt;/p>
&lt;h3 id="kubectl">kubectl&lt;/h3>
&lt;p>&lt;a href="https://github.com/instrumenta/kubeval">kubeval&lt;/a>: Validate Your K8S Yaml&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>kubeval /tmp/a.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>PASS - /tmp/a.yaml contains a valid Service &lt;span style="color:#f92672">(&lt;/span>nginx&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>PASS - /tmp/a.yaml contains a valid StatefulSet &lt;span style="color:#f92672">(&lt;/span>nginx&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="krew">krew&lt;/h3>
&lt;p>&lt;a href="https://github.com/kubernetes-sigs/krew">krew&lt;/a>: kubectl plugin package manager&lt;/p>
&lt;h3 id="kube-ps1">kube-ps1&lt;/h3>
&lt;p>&lt;a href="https://github.com/jonmosco/kube-ps1">kube-ps1&lt;/a>: Show current context in your $PS1, useful when working with multiple clusters.&lt;/p></content></item><item><title>Kubernetes Cheatsheet</title><link>/cheatsheets/kubernetes/</link><pubDate>Sat, 23 Jan 2021 00:00:00 +0800</pubDate><guid>/cheatsheets/kubernetes/</guid><description>Kubernetes Useful Resource Templates / Snippets</description><content>&lt;h1 id="kubernetes">Kubernetes&lt;/h1>
&lt;h2 id="useful-resource-templates--snippets">Useful Resource Templates / Snippets&lt;/h2>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20deployment%0aapiVersion%3a%20apps%2fv1%0akind%3a%20Deployment%0ametadata%3a%0a%20%20name%3a%20nginx-deployment%0a%20%20namespace%3a%20default%0a%20%20labels%3a%0a%20%20%20%20app%3a%20nginx%0aspec%3a%0a%20%20replicas%3a%201%0a%20%20selector%3a%0a%20%20%20%20matchLabels%3a%0a%20%20%20%20%20%20app%3a%20nginx%0a%20%20template%3a%0a%20%20%20%20metadata%3a%0a%20%20%20%20%20%20labels%3a%0a%20%20%20%20%20%20%20%20app%3a%20nginx%0a%20%20%20%20spec%3a%0a%20%20%20%20%20%20containers%3a%0a%20%20%20%20%20%20-%20name%3a%20nginx%0a%20%20%20%20%20%20%20%20image%3a%20nginx%3a1.21%0a%20%20%20%20%20%20%20%20ports%3a%0a%20%20%20%20%20%20%20%20-%20containerPort%3a%2080%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20statefulset%0aapiVersion%3a%20apps%2fv1%0akind%3a%20Statefulset%0ametadata%3a%0a%20%20name%3a%20nginx-statefulset%0a%20%20namespace%3a%20default%0a%20%20labels%3a%0a%20%20%20%20app%3a%20nginx%0aspec%3a%0a%20%20serviceName%3a%20nginx%0a%20%20replicas%3a%201%0a%20%20selector%3a%0a%20%20%20%20matchLabels%3a%0a%20%20%20%20%20%20app%3a%20nginx%0a%20%20template%3a%0a%20%20%20%20metadata%3a%0a%20%20%20%20%20%20labels%3a%0a%20%20%20%20%20%20%20%20app%3a%20nginx%0a%20%20%20%20spec%3a%0a%20%20%20%20%20%20containers%3a%0a%20%20%20%20%20%20-%20name%3a%20nginx%0a%20%20%20%20%20%20%20%20image%3a%20nginx%3a1.21%0a%20%20%20%20%20%20%20%20ports%3a%0a%20%20%20%20%20%20%20%20-%20containerPort%3a%2080%0a%20%20%20%20%20%20%20%20volumeMounts%3a%0a%20%20%20%20%20%20%20%20-%20name%3a%20www%0a%20%20%20%20%20%20%20%20%20%20mountPath%3a%20%2fusr%2fshare%2fnginx%2fhtml%0a%20%20volumeClaimTemplates%3a%0a%20%20-%20metadata%3a%0a%20%20%20%20%20%20name%3a%20www%0a%20%20%20%20spec%3a%0a%20%20%20%20%20%20accessModes%3a%20%5b%20%22ReadWriteOnce%22%20%5d%0a%20%20%20%20%20%20resources%3a%0a%20%20%20%20%20%20%20%20requests%3a%0a%20%20%20%20%20%20%20%20%20%20storage%3a%201Gi%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20service%0aapiVersion%3a%20v1%0akind%3a%20Service%0ametadata%3a%0a%20%20name%3a%20nginx%0a%20%20namespace%3a%20default%0a%20%20labels%3a%0a%20%20%20%20app%3a%20nginx%0aspec%3a%0a%20%20ports%3a%0a%20%20-%20port%3a%2080%0a%20%20%20%20name%3a%20web%0a%20%20selector%3a%0a%20%20%20%20app%3a%20nginx%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20ingress%0aapiVersion%3a%20networking.k8s.io%2fv1%0akind%3a%20Ingress%0ametadata%3a%0a%20%20annotations%3a%20%7b%7d%0a%20%20name%3a%20nginx%0a%20%20namespace%3a%20default%0a%20%20labels%3a%0a%20%20%20%20app%3a%20nginx%0aspec%3a%0a%20%20rules%3a%0a%20%20-%20host%3a%20www.example.com%0a%20%20%20%20http%3a%0a%20%20%20%20%20%20paths%3a%0a%20%20%20%20%20%20-%20backend%3a%0a%20%20%20%20%20%20%20%20%20%20service%3a%0a%20%20%20%20%20%20%20%20%20%20%20%20name%3a%20nginx%0a%20%20%20%20%20%20%20%20%20%20%20%20port%3a%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20number%3a%2080%0a%20%20%20%20%20%20%20%20path%3a%20%2f%0a%20%20%20%20%20%20%20%20pathType%3a%20ImplementationSpecific%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20configmap%0aapiVersion%3a%20v1%0akind%3a%20ConfigMap%0ametadata%3a%0a%20%20name%3a%20nginx%0a%20%20namespace%3a%20default%0adata%3a%0a%20%20key1%3a%20value1%0a%20%20nginx.conf%3a%20%7c%0a%20%20%20%20events%20%7b%0a%20%20%20%20%20%20worker_connections%20%201024%3b%0a%20%20%20%20%7d%0a%20%20%20%20worker_processes%20auto%3b%0a%20%20%20%20error_log%20%2fdev%2fstdout%20notice%3b%0a%20%20%20%20pid%20%2fvar%2frun%2fnginx.pid%3b%0a%20%20%20%20http%20%7b%0a%20%20%20%20%20%20server%20%7b%0a%20%20%20%20%20%20%20%20listen%2080%20default_server%3b%0a%20%20%20%20%20%20%20%20server_name%20_%3b%0a%20%20%20%20%20%20%20%20return%20301%20https%3a%2f%2f%24host%24request_uri%3b%0a%20%20%20%20%20%20%7d%0a%20%20%20%20%7d%0a%20%20%20%20stream%20%7b%0a%20%20%20%20%20%20server%20%7b%0a%20%20%20%20%20%20%20%20listen%20443%3b%0a%20%20%20%20%20%20%20%20resolver%20172.20.0.10%3b%0a%20%20%20%20%20%20%20%20proxy_pass%20127.0.0.1%3a443%3b%0a%20%20%20%20%20%20%7d%0a%20%20%20%20%7d%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20secret%0aapiVersion%3a%20v1%0akind%3a%20Secret%0ametadata%3a%0a%20%20name%3a%20nginx%0a%20%20namespace%3a%20default%0atype%3a%20Opaque%0adata%3a%0a%20%20username%3a%20YWRtaW4%3d%0a%20%20password%3a%20MWYyZDFlMmU2N2Rm%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20role%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20rolebinding%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20clusterrole%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20clusterrolebinding%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20livenessProbe%20and%20readinessProbe%20with%20http%20protocol%0aspec%3a%0a%20%20containers%3a%0a%20%20-%20name%3a%20app%0a%20%20%20%20livenessProbe%3a%0a%20%20%20%20%20%20httpGet%3a%0a%20%20%20%20%20%20%20%20path%3a%20%2fhealthz%0a%20%20%20%20%20%20%20%20port%3a%208080%0a%20%20%20%20%20%20%20%20httpHeaders%3a%0a%20%20%20%20%20%20%20%20-%20name%3a%20Custom-Header%0a%20%20%20%20%20%20%20%20%20%20value%3a%20Awesome%0a%20%20%20%20%20%20initialDelaySeconds%3a%203%0a%20%20%20%20%20%20periodSeconds%3a%203%0a%20%20%20%20readinessProbe%3a%0a%20%20%20%20%20%20httpGet%3a%0a%20%20%20%20%20%20%20%20path%3a%20%2fhealthz%0a%20%20%20%20%20%20%20%20port%3a%208080%0a%20%20%20%20%20%20%20%20httpHeaders%3a%0a%20%20%20%20%20%20%20%20-%20name%3a%20Custom-Header%0a%20%20%20%20%20%20%20%20%20%20value%3a%20Awesome%0a%20%20%20%20%20%20initialDelaySeconds%3a%203%0a%20%20%20%20%20%20periodSeconds%3a%203%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20livenessProbe%20and%20readinessProbe%20with%20TCP%20protocol%0aspec%3a%0a%20%20containers%3a%0a%20%20-%20name%3a%20app%0a%20%20%20%20readinessProbe%3a%0a%20%20%20%20%20%20tcpSocket%3a%0a%20%20%20%20%20%20%20%20port%3a%208080%0a%20%20%20%20%20%20initialDelaySeconds%3a%205%0a%20%20%20%20%20%20periodSeconds%3a%2010%0a%20%20%20%20livenessProbe%3a%0a%20%20%20%20%20%20tcpSocket%3a%0a%20%20%20%20%20%20%20%20port%3a%208080%0a%20%20%20%20%20%20initialDelaySeconds%3a%2015%0a%20%20%20%20%20%20periodSeconds%3a%2020%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20mount%20a%20configmap%0aapiVersion%3a%20v1%0akind%3a%20Pod%0ametadata%3a%0a%20%20name%3a%20nginx%0a%20%20namespace%3a%20default%0aspec%3a%0a%20%20containers%3a%0a%20%20%20%20-%20name%3a%20nginx%0a%20%20%20%20%20%20image%3a%20nginx%3alatest%0a%20%20%20%20%20%20volumeMounts%3a%0a%20%20%20%20%20%20-%20name%3a%20config-volume%0a%20%20%20%20%20%20%20%20mountPath%3a%20%2fetc%2fnginx%0a%20%20%20%20%20%20%20%20subPath%3a%0a%20%20volumes%3a%0a%20%20%20%20-%20name%3a%20config-volume%0a%20%20%20%20%20%20configMap%3a%0a%20%20%20%20%20%20%20%20name%3a%20nginx%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20env%20from%20configmap%20or%20secret%0aapiVersion%3a%20v1%0akind%3a%20Pod%0ametadata%3a%0a%20%20name%3a%20nginx%0a%20%20namespace%3a%20default%0aspec%3a%0a%20%20containers%3a%0a%20%20%20%20-%20name%3a%20nginx%0a%20%20%20%20%20%20image%3a%20nginx%3alatest%0a%20%20%20%20%20%20env%3a%0a%20%20%20%20%20%20-%20name%3a%20SECRET_USERNAME%0a%20%20%20%20%20%20%20%20valueFrom%3a%0a%20%20%20%20%20%20%20%20%20%20configMapKeyRef%3a%0a%20%20%20%20%20%20%20%20%20%20%20%20name%3a%20nginx%0a%20%20%20%20%20%20%20%20%20%20%20%20key%3a%20username%0a%20%20%20%20%20%20%20%20%20%20%20%20optional%3a%20false%0a%20%20%20%20%20%20-%20name%3a%20SECRET_PASSWORD%0a%20%20%20%20%20%20%20%20valueFrom%3a%0a%20%20%20%20%20%20%20%20%20%20secretKeyRef%3a%0a%20%20%20%20%20%20%20%20%20%20%20%20name%3a%20nginx%0a%20%20%20%20%20%20%20%20%20%20%20%20key%3a%20password%0a%20%20%20%20%20%20%20%20%20%20%20%20optional%3a%20false%0a%20%20%20%20%20%20envFrom%3a%0a%20%20%20%20%20%20-%20configMapRef%3a%0a%20%20%20%20%20%20%20%20%20%20name%3a%20nginx%0a%20%20%20%20%20%20-%20secretRef%3a%0a%20%20%20%20%20%20%20%20%20%20name%3a%20nginx%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20get%20Pod%20Name%20and%20Pod%20IP%20%0acontainers%3a%0a%20%20-%20env%3a%0a%20%20%20%20-%20name%3a%20MY_POD_IP%0a%20%20%20%20%20%20valueFrom%3a%0a%20%20%20%20%20%20%20%20fieldRef%3a%0a%20%20%20%20%20%20%20%20%20%20apiVersion%3a%20v1%0a%20%20%20%20%20%20%20%20%20%20fieldPath%3a%20status.podIP%0a%20%20%20%20-%20name%3a%20MY_POD_NAME%0a%20%20%20%20%20%20valueFrom%3a%0a%20%20%20%20%20%20%20%20fieldRef%3a%0a%20%20%20%20%20%20%20%20%20%20apiVersion%3a%20v1%0a%20%20%20%20%20%20%20%20%20%20fieldPath%3a%20metadata.name%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://shuai.dev/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=yaml&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20affinity%20run%20pod%20on%20different%20node%0a%20%20affinity%3a%0a%20%20%20%20podAntiAffinity%3a%0a%20%20%20%20%20%20preferredDuringSchedulingIgnoredDuringExecution%3a%0a%20%20%20%20%20%20-%20podAffinityTerm%3a%0a%20%20%20%20%20%20%20%20%20%20labelSelector%3a%0a%20%20%20%20%20%20%20%20%20%20%20%20matchLabels%3a%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20app.kubernetes.io%2fname%3a%20nginx%0a%20%20%20%20%20%20%20%20%20%20namespaces%3a%0a%20%20%20%20%20%20%20%20%20%20-%20apisix-system%0a%20%20%20%20%20%20%20%20%20%20topologyKey%3a%20kubernetes.io%2fhostname%0a%20%20%20%20%20%20%20%20weight%3a%201%0a%0a'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe></content></item></channel></rss>