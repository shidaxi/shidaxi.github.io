<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>awscli on Tech Memory</title><link>/tags/awscli/</link><description>Recent content in awscli on Tech Memory</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 23 Jan 2021 00:00:00 +0800</lastBuildDate><atom:link href="/tags/awscli/index.xml" rel="self" type="application/rss+xml"/><item><title>AWS CLI Cheatsheet</title><link>/cheatsheets/aws-cli/</link><pubDate>Sat, 23 Jan 2021 00:00:00 +0800</pubDate><guid>/cheatsheets/aws-cli/</guid><description>aws configure cli output filtering For basic syntax, please refer to https://docs.aws.amazon.com/cli/latest/userguide/cli-usage-filter.html
This article only share some practical examples.
server side filtering with option &amp;ndash;filter Server-side filtering in the AWS CLI is provided by the AWS service API. The AWS service only returns the records in the HTTP response that match your filter, which can speed up HTTP response times for large data sets. Since server-side filtering is defined by the service API, the parameter names and functions vary between services.</description><content>&lt;h2 id="aws-configure">aws configure&lt;/h2>
&lt;iframe
src='https://carbon.now.sh/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=shell&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20aws%20cli%20related%20environement%20variables%0aexport%20AWS_PROFILE%3d%0aexport%20AWS_ACCESS_KEY_ID%3d%0aexport%20AWS_SECRET_ACCESS_KEY%3d%0aexport%20AWS_SESSION_TOKEN%3d%0aexport%20AWS_REGION%3dap-southeast-1%0aexport%20AWS_DEFAULT_OUTPUT%3djson%0aexport%20AWS_DEFAULT_REGION%3dap-southeast-1%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
height='320px'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;h2 id="cli-output-filtering">cli output filtering&lt;/h2>
&lt;p>For basic syntax, please refer to
&lt;a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-usage-filter.html">https://docs.aws.amazon.com/cli/latest/userguide/cli-usage-filter.html&lt;/a>&lt;/p>
&lt;p>This article only share some practical examples.&lt;/p>
&lt;h3 id="server-side-filtering-with-option---filter">server side filtering with option &amp;ndash;filter&lt;/h3>
&lt;p>Server-side filtering in the AWS CLI is provided by the AWS service API. The AWS service only returns the records in the HTTP response that match your filter, which can speed up HTTP response times for large data sets. Since server-side filtering is defined by the service API, the parameter names and functions vary between services.&lt;/p>
&lt;p>&lt;strong>Notice:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&amp;ndash;filter and &amp;ndash;filters does not support regular expressions.&lt;/li>
&lt;li>&amp;ndash;filter-expression does support expression, but only a few aws service support this option&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="client-side-filtering-with-optioin---query">client side filtering with optioin &amp;ndash;query&lt;/h3>
&lt;p>The AWS CLI provides built-in JSON-based client-side filtering capabilities with the &amp;ndash;query parameter. The &amp;ndash;query parameter is a powerful tool you can use to customize the content and style of your output. The &amp;ndash;query parameter takes the HTTP response that comes back from the server and filters the results before displaying them. Since the entire HTTP response is sent to the client before filtering, client-side filtering can be slower than server-side filtering for large data-sets.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="client-side-filtering-with-jq">Client Side Filtering with jq&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="aws-sts">aws sts&lt;/h2>
&lt;iframe
src='https://carbon.now.sh/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=shell&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20get%20current%20identity%0aaws%20sts%20get-caller-identity%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
height='220px'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://carbon.now.sh/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=shell&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20assume%20role%20and%20set%20credentials%20to%20env%20variables%2c%20with%20jq%0aROLE_ARN%3darn%3aaws%3aiam%3a%3a000000000000%3arole%2fyour-role%0aeval%20%24%28aws%20sts%20assume-role%20%5c%0a%20%20%20%20%20%20%20%20--role-arn%20%24%7bROLE_ARN%7d%20%5c%0a%20%20%20%20%20%20%20%20--role-session-name%20sess-name%20%5c%0a%20%20%20%20%20%20%20%20%7c%20jq%20-r%20%27.Credentials%20%7c%20%22export%20AWS_ACCESS_KEY_ID%3d%5c%28.AccessKeyId%29%20AWS_SECRET_ACCESS_KEY%3d%5c%28.SecretAccessKey%29%20AWS_SESSION_TOKEN%3d%5c%28.SessionToken%29%22%27%0a%20%20%20%20%20%20%29%0a%23%20assume%20role%20and%20set%20credentials%20to%20env%20variables%2c%20with%20sed%20%26%20awk%0aROLE_ARN%3darn%3aaws%3aiam%3a%3a000000000000%3arole%2fyour-role%0aeval%20%24%28aws%20sts%20assume-role%20%5c%0a%20%20%20%20%20%20%20%20--role-arn%20%24%7bROLE_ARN%7d%20%5c%0a%20%20%20%20%20%20%20%20--role-session-name%20sess-name%20%5c%20%0a%20%20%20%20%20%20%20%20%7c%20egrep%20%27%28SecretAccessKey%7cSessionToken%7cAccessKeyId%29%27%20%5c%0a%20%20%20%20%20%20%20%20%7c%20awk%20-F%27%22%27%20%27%7bprint%20%22export%20AWS%22toupper%28gensub%28%2f%28%5bA-Z%5d%29%2f%2c%20%22_%5c%5c1%22%2c%20%22g%22%2c%242%29%29%22%3d%22%244%7d%27%0a%20%20%20%20%20%20%29%0a'
height='580px'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;h2 id="aws-ec2">aws ec2&lt;/h2>
&lt;iframe
src='https://carbon.now.sh/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=shell&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20find%20ec2%20with%20--filters%0aaws%20ec2%20describe-instances%20%5c%0a%20%20%20%20--filters%20Name%3dinstance-type%2cValues%3dt2.micro%2ct3.micro%20%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3davailability-zone%2cValues%3dus-east-2c%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a%0a%23%20find%20ec2%20with%20--filters%20by%20tag%0aaws%20ec2%20describe-instances%20%5c%0a%20%20%20%20--filters%20Name%3dtag%3aOwner%2cValues%3dmy-team%0a%0a%23%20find%20ec2%20with%20--filters%20by%20tag%0aaws%20ec2%20describe-instances%20%5c%0a%20%20%20%20--filters%20%22Name%3dtag%3aOwner%2cValues%3dmy-team%22%0a'
height='470px'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://carbon.now.sh/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=shell&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20get%20only%20useful%20information%20of%20ec2%20instances%20wich%20both%20--filters%20and%20--query%0aaws%20ec2%20describe-instances%20%5c%0a%20%20%20%20--filters%20%22Name%3dtag%3aOwner%2cValues%3dmy-team%22%0a%20%20%20%20--query%20%27Reservations%5b%2a%5d.Instances%5b%2a%5d.%7bInstance%3aInstanceId%2c%20Name%3aTags%5b%3fKey%3d%3d%60Name%60%5d%7c%5b0%5d.Value%7d%27%0a%0a%23%20--output%20table%20makes%20outputs%20more%20human%20readable.%0aaws%20ec2%20describe-instances%20%5c%0a%20%20%20%20--filters%20Name%3dtag-key%2cValues%3dName%20%5c%0a%20%20%20%20--query%20%27Reservations%5b%2a%5d.Instances%5b%2a%5d.%7bInstance%3aInstanceId%2cAZ%3aPlacement.AvailabilityZone%2cName%3aTags%5b%3fKey%3d%3d%60Name%60%5d%7c%5b0%5d.Value%7d%27%20%5c%0a%20%20%20%20--output%20table%0a%0a-------------------------------------------------------------%0a%7c%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20DescribeInstances%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7c%0a%2b--------------%2b-----------------------%2b--------------------%2b%0a%7c%20%20%20%20%20%20AZ%20%20%20%20%20%20%7c%20%20%20%20%20%20%20Instance%20%20%20%20%20%20%20%20%7c%20%20%20%20%20%20%20%20Name%20%20%20%20%20%20%20%20%7c%0a%2b--------------%2b-----------------------%2b--------------------%2b%0a%7c%20%20us-east-2b%20%20%7c%20%20i-057750d42936e468a%20%20%7c%20%20my-prod-server%20%20%20%20%7c%0a%7c%20%20us-east-2a%20%20%7c%20%20i-001efd250faaa6ffa%20%20%7c%20%20test-server-1%20%20%20%20%20%7c%0a%7c%20%20us-east-2a%20%20%7c%20%20i-027552a73f021f3bd%20%20%7c%20%20test-server-2%20%20%20%20%20%7c%0a%2b--------------%2b-----------------------%2b--------------------%2b%0a'
height='760px'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;iframe
src='https://carbon.now.sh/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=shell&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20login%20to%20ec2%20shell%20via%20session%20manager%0aaws%20ssm%20start-session%20--target%20i-aaaaaaaaaaaaaaaaaa%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a%23%20port-forward%0a%0a'
height='320px'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;h2 id="aws-s3">aws s3&lt;/h2>
&lt;iframe
src='https://carbon.now.sh/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=shell&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20list%20bucket%0aaws%20s3%20ls%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a%23%20rename%20folder%0aaws%20s3%20--recursive%20mv%20s3%3a%2f%2fyour-bucket%2fpath%2fto%2ffoo%20s3%3a%2f%2fyour-bucket%2fpath%2fto%2fbar%0a'
height='320px'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;h2 id="aws-eks">aws eks&lt;/h2>
&lt;iframe
src='https://carbon.now.sh/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=shell&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20check%20web%20identity%20of%20pod%0aenv%20%7c%20grep%20AWS_%0a%0a%23%20get%20cluster%20name%0aaws%20eks%20list-clusters%0a%0a%23%20get%20kubeconfig%0aaws%20eks%20update-kubeconfig%20--name%20your-cluster-name%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0a'
height='320px'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe>
&lt;h2 id="cloudfront">cloudfront&lt;/h2>
&lt;iframe
src='https://carbon.now.sh/embed?bg=rgba(74,144,226,0)&amp;t=blackboard&amp;wt=none&amp;l=shell&amp;ds=false&amp;dsyoff=60px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=5px&amp;ph=5px&amp;ln=false&amp;fl=1&amp;fm=Fira+Code&amp;fs=16px&amp;lh=152%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%0a%23%20list%20distributions%20with%20id%2c%20aliases%2c%20domian%20name%20and%20origin%0aaws%20cloudfront%20list-distributions%20%5c%0a%20%20%7c%20jq%20%20%27.DistributionList.Items%5b%5d%20%7c%20%7b%22Id%22%3a%20.Id%2c%20%22Aliases%22%3a%20.Aliases.Items%2c%20%22Domain%22%3a%20.DomainName%2c%20%22Origin%22%3a%20.Origins.Items%5b0%5d.DomainName%7d%27%0a%0a%23%20create%20an%20invalidation%2c%20clear%20cache%0aaws%20cloudfront%20create-invalidation%20distribution-id%0a'
height='320px'
style='width: 100%; border:0; transform: scale(1); overflow:hidden;'
sandbox="allow-scripts allow-same-origin">
&lt;/iframe></content></item></channel></rss>