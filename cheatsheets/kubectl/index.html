<!doctype html><html lang=en><head><title>Kubectl Cheatsheet :: Tech Memory</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Kubectl Cheatsheet Docs:
https://kubernetes.io/docs/reference/kubectl/cheatsheet/ https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands https://erosb.github.io/post/json-patch-vs-merge-patch/ Viewing, Finding Resources Nodes # get node status confditions JSONPATH=&amp;#39;{range .items[*]}{@.metadata.name}: {range @.status.conditions[*]}{@.type}={@.status}, {end}{&amp;#34;\n&amp;#34;}{end}&amp;#39; \ &amp;amp;&amp;amp; kubectl get nodes -o jsonpath=&amp;#34;$JSONPATH&amp;#34; # check node cpu / memory usage kubectl top pod # check node status kubectl describe nodes kubernetes-minion-emt8.c.myproject.internal # find out the most hight cpu cost pod of a node kubectl get po -A -owide | grep ${NODE_NAME} | awk &amp;#39;{print $1, $2}&amp;#39; | xargs -n2 kubectl top pod --no-headers -n $1 | sort --key 2 -nr | column -t # find out the most hight memory cost pod of a node kubectl get po -A -owide | grep ${NODE_NAME} | awk &amp;#39;{print $1, $2}&amp;#39; | xargs -n2 kubectl top pod --no-headers -n $1 | sort --key 3 -nr | column -t Pods # get resource sort by name kubectl get services --sort-by=."><meta name=keywords content="kubectl,cheatsheet,kubernetes,k8s"><meta name=robots content="noodp"><link rel=canonical href=/cheatsheets/kubectl/><script async src="https://www.googletagmanager.com/gtag/js?id=G-V7B9YXY847"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-V7B9YXY847",{anonymize_ip:!1})}</script><link rel=stylesheet href=/assets/style.css><link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/favicon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Kubectl Cheatsheet"><meta property="og:description" content="Kubectl Cheatsheet Docs:
https://kubernetes.io/docs/reference/kubectl/cheatsheet/ https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands https://erosb.github.io/post/json-patch-vs-merge-patch/ Viewing, Finding Resources Nodes # get node status confditions JSONPATH=&amp;#39;{range .items[*]}{@.metadata.name}: {range @.status.conditions[*]}{@.type}={@.status}, {end}{&amp;#34;\n&amp;#34;}{end}&amp;#39; \ &amp;amp;&amp;amp; kubectl get nodes -o jsonpath=&amp;#34;$JSONPATH&amp;#34; # check node cpu / memory usage kubectl top pod # check node status kubectl describe nodes kubernetes-minion-emt8.c.myproject.internal # find out the most hight cpu cost pod of a node kubectl get po -A -owide | grep ${NODE_NAME} | awk &amp;#39;{print $1, $2}&amp;#39; | xargs -n2 kubectl top pod --no-headers -n $1 | sort --key 2 -nr | column -t # find out the most hight memory cost pod of a node kubectl get po -A -owide | grep ${NODE_NAME} | awk &amp;#39;{print $1, $2}&amp;#39; | xargs -n2 kubectl top pod --no-headers -n $1 | sort --key 3 -nr | column -t Pods # get resource sort by name kubectl get services --sort-by=."><meta property="og:url" content="/cheatsheets/kubectl/"><meta property="og:site_name" content="Tech Memory"><meta property="og:image" content="/images/cover-kubectl-cheatsheet.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2021-03-23 00:00:00 +0800 +0800"></head><body class=orange><div class="container headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>tech @ memory: ~ $</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/>Posts</a></li><li><a href=/cheatsheets>Cheatsheets</a></li><li><a href=/tools>Tools</a></li><li><a href=/icon-collections>Icons</a></li><li><a href=/about>About</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/>Posts</a></li><li><a href=/cheatsheets>Cheatsheets</a></li><li><a href=/tools>Tools</a></li><li><a href=/icon-collections>Icons</a></li><li><a href=/about>About</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=/cheatsheets/kubectl/>Kubectl Cheatsheet</a></h1><div class=post-meta><span class=post-date>2021-03-23</span></div><span class=post-tags>#<a href=/tags/kubectl/>kubectl</a>&nbsp;
#<a href=/tags/cheatsheet/>cheatsheet</a>&nbsp;
#<a href=/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=/tags/k8s/>k8s</a>&nbsp;</span>
<img src=/images/cover-kubectl-cheatsheet.png class=post-cover alt="Kubectl Cheatsheet" title="Cover Image"><div class=table-of-contents><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#viewing-finding-resources>Viewing, Finding Resources</a><ul><li><a href=#nodes>Nodes</a></li><li><a href=#pods>Pods</a></li><li><a href=#others>Others</a></li></ul></li><li><a href=#troubleshoot>Troubleshoot</a><ul><li><a href=#check-resource-status>Check Resource Status</a></li><li><a href=#run-a-debugger-pod--deployment>Run a Debugger Pod / Deployment</a></li><li><a href=#temporarily-change-resource>Temporarily Change Resource</a></li></ul></li><li><a href=#test-kubernetes-features>Test Kubernetes Features</a><ul><li><a href=#run-a-test-deployment>Run a Test Deployment</a></li><li><a href=#create-yaml-objects-from-stdin>Create YAML Objects from Stdin</a></li></ul></li><li><a href=#awesome-kubernetes>Awesome Kubernetes</a><ul><li><a href=#k9s>k9s</a></li><li><a href=#kubectx>kubectx</a></li><li><a href=#kubectl>kubectl</a></li><li><a href=#krew>krew</a></li><li><a href=#kube-ps1>kube-ps1</a></li></ul></li></ul></nav></div><div class=post-content><div><h1 id=kubectl-cheatsheet>Kubectl Cheatsheet<a href=#kubectl-cheatsheet class=hanchor arialabel=Anchor>&#8983;</a></h1><p>Docs:</p><ul><li><a href=https://kubernetes.io/docs/reference/kubectl/cheatsheet/>https://kubernetes.io/docs/reference/kubectl/cheatsheet/</a></li><li><a href=https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands>https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands</a></li><li><a href=https://erosb.github.io/post/json-patch-vs-merge-patch/>https://erosb.github.io/post/json-patch-vs-merge-patch/</a></li></ul><h2 id=viewing-finding-resources>Viewing, Finding Resources<a href=#viewing-finding-resources class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=nodes>Nodes<a href=#nodes class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># get node status confditions</span>
</span></span><span style=display:flex><span>JSONPATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{range .items[*]}{@.metadata.name}: {range @.status.conditions[*]}{@.type}={@.status}, {end}{&#34;\n&#34;}{end}&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> <span style=color:#f92672>&amp;&amp;</span> kubectl get nodes -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$JSONPATH<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># check node cpu / memory usage</span>
</span></span><span style=display:flex><span>kubectl top pod 
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># check node status</span>
</span></span><span style=display:flex><span>kubectl describe nodes kubernetes-minion-emt8.c.myproject.internal
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># find out the most hight cpu cost pod of a node</span>
</span></span><span style=display:flex><span>kubectl get po -A -owide | grep <span style=color:#e6db74>${</span>NODE_NAME<span style=color:#e6db74>}</span> | awk <span style=color:#e6db74>&#39;{print $1, $2}&#39;</span> | xargs -n2 kubectl top pod --no-headers -n $1 | sort --key <span style=color:#ae81ff>2</span> -nr | column -t
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># find out the most hight memory cost pod of a node</span>
</span></span><span style=display:flex><span>kubectl get po -A -owide | grep <span style=color:#e6db74>${</span>NODE_NAME<span style=color:#e6db74>}</span> | awk <span style=color:#e6db74>&#39;{print $1, $2}&#39;</span> | xargs -n2 kubectl top pod --no-headers -n $1 | sort --key <span style=color:#ae81ff>3</span> -nr | column -t
</span></span></code></pre></div><h3 id=pods>Pods<a href=#pods class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># get resource sort by name</span>
</span></span><span style=display:flex><span>kubectl get services --sort-by<span style=color:#f92672>=</span>.metadata.name
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># check pod cpu / memory usage</span>
</span></span><span style=display:flex><span><span style=color:#75715e># all pod in current namespace</span>
</span></span><span style=display:flex><span>kubectl top pod 
</span></span><span style=display:flex><span><span style=color:#75715e># all pod and its containers in current namespace</span>
</span></span><span style=display:flex><span>kubectl top pod --containers
</span></span><span style=display:flex><span><span style=color:#75715e># this pod and its containers in current namespace</span>
</span></span><span style=display:flex><span>kubectl top pod nginx-0 --containers
</span></span><span style=display:flex><span><span style=color:#75715e># sort by cpu</span>
</span></span><span style=display:flex><span>kubectl top pod --sort-by<span style=color:#f92672>=</span>cpu --no-headers
</span></span><span style=display:flex><span><span style=color:#75715e># sort by memory</span>
</span></span><span style=display:flex><span>kubectl top pod --sort-by<span style=color:#f92672>=</span>memory --no-headers
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># get pods which are not in Running</span>
</span></span><span style=display:flex><span>kubectl get pods --field-selector<span style=color:#f92672>=</span>status.phase!<span style=color:#f92672>=</span>Running
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># get events for a certainer pod</span>
</span></span><span style=display:flex><span>kubectl get event --namespace default --field-selector involvedObject.name<span style=color:#f92672>=</span>nginx-0
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl rollout history deployment/nginx
</span></span><span style=display:flex><span>kubectl rollout history statefulset/nginx
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># get first pod log </span>
</span></span><span style=display:flex><span>kubectl logs <span style=color:#e6db74>`</span>kubectl get po -o name | grep keyword | head -1<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>kubectl exec -it <span style=color:#e6db74>`</span>kubectl get po -o name | grep keyword | head -1<span style=color:#e6db74>`</span> -- bash
</span></span></code></pre></div><h3 id=others>Others<a href=#others class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># get configmap item</span>
</span></span><span style=display:flex><span>kubectl get configmap nginx -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.data.nginx\.conf}&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Produce a period-delimited tree of all keys returned for nodes</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Helpful when locating a key within a complex nested JSON structure</span>
</span></span><span style=display:flex><span>kubectl get nodes -o json | jq -c <span style=color:#e6db74>&#39;paths|join(&#34;.&#34;)&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Produce a period-delimited tree of all keys returned for pods, etc</span>
</span></span><span style=display:flex><span>kubectl get pods -o json | jq -c <span style=color:#e6db74>&#39;paths|join(&#34;.&#34;)&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># View api resources list</span>
</span></span><span style=display:flex><span>kubectl api-resources
</span></span><span style=display:flex><span>kubectl api-resources --sort-by<span style=color:#f92672>=</span>name 
</span></span><span style=display:flex><span>kubectl api-resources --sort-by<span style=color:#f92672>=</span>kind
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl api-resources --api-group<span style=color:#f92672>=</span>networking.k8s.io
</span></span></code></pre></div><h2 id=troubleshoot>Troubleshoot<a href=#troubleshoot class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=check-resource-status>Check Resource Status<a href=#check-resource-status class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># check contaner statuses</span>
</span></span><span style=display:flex><span>kubectl get pod nginx-0 -n default -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{.status.containerStatuses}&#34;</span> | jq
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># get events for a certainer pod</span>
</span></span><span style=display:flex><span>kubectl get event --namespace default --field-selector involvedObject.name<span style=color:#f92672>=</span>nginx-0
</span></span></code></pre></div><h3 id=run-a-debugger-pod--deployment>Run a Debugger Pod / Deployment<a href=#run-a-debugger-pod--deployment class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># run a mysql client pod to troubleshoot database issue:</span>
</span></span><span style=display:flex><span>kubectl run myclient --rm -i --tty --image mysql:5.7 -- bash
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># run a postgres client pod to troubleshoot database issue:</span>
</span></span><span style=display:flex><span>kubectl run pgclient --rm -i --tty --image postgres:13-alpine -- bash
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># run a mongo client pod to troubleshoot mongodb issue:</span>
</span></span><span style=display:flex><span>kubectl run mongoclient --rm -i --tty --image mongo:5 -- bash
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># run a busybox pod to troubleshoot network or http issue</span>
</span></span><span style=display:flex><span>kubectl run debugger --rm -i --tty --image nicolaka/netshoot:latest -- bash
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># run a netshoot pod to troubleshoot network or http issue</span>
</span></span><span style=display:flex><span>kubectl run debugger --rm -i --tty --image nicolaka/netshoot:latest -- bash
</span></span></code></pre></div><h3 id=temporarily-change-resource>Temporarily Change Resource<a href=#temporarily-change-resource class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># disable healthcheck if you want to troubleshoot healthcheck failure</span>
</span></span><span style=display:flex><span><span style=color:#75715e># --type json, use json patch(RFC 6902), check official docs</span>
</span></span><span style=display:flex><span>kubectl patch deployment nginx --type json -p<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[{&#34;op&#34;: &#34;remove&#34;, &#34;path&#34;: &#34;/spec/template/spec/containers/0/livenessProbe&#34;}]&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># increase initialDelaySeconds to 3600</span>
</span></span><span style=display:flex><span>kubectl patch deploy nginx --type json <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/spec/template/spec/containers/0/livenessProbe/initialDelaySeconds&#34;, &#34;value&#34;: 3600}]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      {&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/spec/template/spec/containers/0/readinessProbe/initialDelaySeconds&#34;, &#34;value&#34;: 3600}]&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># change &#34;command&#34; to &#34;sleep 1000&#34; to troubleshoot entrypoint command error</span>
</span></span><span style=display:flex><span>kubectl patch deployment nginx --type json -p<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/spec/template/spec/containers/0/command&#34;, &#34;value&#34;:[&#34;sleep&#34;, &#34;1000&#34;]}]&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># change image to troubleshoot software version issue</span>
</span></span><span style=display:flex><span>kubectl patch deployment nginx --type<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;json&#39;</span> -p<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/spec/template/spec/containers/0/image&#34;, &#34;value&#34;:&#34;nginx:1.21&#34;}]&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># or with set image sub cmd</span>
</span></span><span style=display:flex><span>kubectl set image deployment/nginx nginx<span style=color:#f92672>=</span>nginx:1.21 <span style=color:#75715e># {containerName}=${image}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># scale a deployment</span>
</span></span><span style=display:flex><span>kubectl scale --replicas<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> deploy/nginx
</span></span><span style=display:flex><span><span style=color:#75715e># scale a statefulset</span>
</span></span><span style=display:flex><span>kubectl scale --replicas<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> statefulset/nginx
</span></span><span style=display:flex><span><span style=color:#75715e># scale multiple deployments</span>
</span></span><span style=display:flex><span>kubectl scale --replicas<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> deploy/nginx1 deploy/nginx2 deploy/nginx3
</span></span><span style=display:flex><span><span style=color:#75715e># scale with kubctl patch</span>
</span></span><span style=display:flex><span>kubectl patch deploy nginx --patch <span style=color:#e6db74>&#39;{&#34;spec&#34;: {&#34;replicas&#34;: 2}}&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># restart container inside your pod without chaging pod name and pod ip</span>
</span></span><span style=display:flex><span>kubectl exec -it nginx-0 -- /bin/sh -c <span style=color:#e6db74>&#34;kill 1&#34;</span>
</span></span></code></pre></div><h2 id=test-kubernetes-features>Test Kubernetes Features<a href=#test-kubernetes-features class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=run-a-test-deployment>Run a Test Deployment<a href=#run-a-test-deployment class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># run a test nginx deployment</span>
</span></span><span style=display:flex><span>kubectl create deployment nginx --image<span style=color:#f92672>=</span>nginx
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># delete</span>
</span></span><span style=display:flex><span>kubectl delete deploy nginx
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># run a test busybox deployment</span>
</span></span><span style=display:flex><span>kubectl create deployment busybox --image<span style=color:#f92672>=</span>busybox -- sleep <span style=color:#ae81ff>1000</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># delete</span>
</span></span><span style=display:flex><span>kubectl delete deploy busybox 
</span></span></code></pre></div><h3 id=create-yaml-objects-from-stdin>Create YAML Objects from Stdin<a href=#create-yaml-objects-from-stdin class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># create nginx statefulset</span>
</span></span><span style=display:flex><span>export APP_NAME<span style=color:#f92672>=</span>nginx
</span></span><span style=display:flex><span>export IMAGE<span style=color:#f92672>=</span>nginx:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: Service
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: ${APP_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: ${APP_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  ports:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - port: 80
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    name: web
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  clusterIP: None
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  selector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: ${APP_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>---
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: apps/v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: StatefulSet
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: ${APP_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  serviceName: ${APP_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  replicas: 1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  selector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      app: ${APP_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  template:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        app: ${APP_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      containers:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - name: ${APP_NAME}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        image: ${IMAGE}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ports:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        - containerPort: 80
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          name: web
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#         volumeMounts:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#         - name: www
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#           mountPath: /usr/share/nginx/html
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#   volumeClaimTemplates:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#   - metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#       name: www
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#     spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#       accessModes: [ &#34;ReadWriteOnce&#34; ]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#       resources:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#         requests:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#           storage: 1Gi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h2 id=awesome-kubernetes>Awesome Kubernetes<a href=#awesome-kubernetes class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=k9s>k9s<a href=#k9s class=hanchor arialabel=Anchor>&#8983;</a></h3><p><a href=https://github.com/derailed/k9s>k9s</a>: Terminal Graphical UI</p><h3 id=kubectx>kubectx<a href=#kubectx class=hanchor arialabel=Anchor>&#8983;</a></h3><p><a href=https://github.com/ahmetb/kubectx>kubectx</a>: Kube Context Switcher</p><h3 id=kubectl>kubectl<a href=#kubectl class=hanchor arialabel=Anchor>&#8983;</a></h3><p><a href=https://github.com/instrumenta/kubeval>kubeval</a>: Validate Your K8S Yaml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubeval /tmp/a.yaml 
</span></span><span style=display:flex><span>PASS - /tmp/a.yaml contains a valid Service <span style=color:#f92672>(</span>nginx<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>PASS - /tmp/a.yaml contains a valid StatefulSet <span style=color:#f92672>(</span>nginx<span style=color:#f92672>)</span>
</span></span></code></pre></div><h3 id=krew>krew<a href=#krew class=hanchor arialabel=Anchor>&#8983;</a></h3><p><a href=https://github.com/kubernetes-sigs/krew>krew</a>: kubectl plugin package manager</p><h3 id=kube-ps1>kube-ps1<a href=#kube-ps1 class=hanchor arialabel=Anchor>&#8983;</a></h3><p><a href=https://github.com/jonmosco/kube-ps1>kube-ps1</a>: Show current context in your $PS1, useful when working with multiple clusters.</p></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/assets/main.js></script>
<script src=/assets/prism.js></script></div></body></html>